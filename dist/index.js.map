{"version":3,"file":"index.js","sources":["../src/helper.js","../src/pumaLoginMixin.js","../src/index.js"],"sourcesContent":["import { MSG_TYPE_SET_INIT_DATA } from \"@x-tech/fe-puma-lib/lib/consts\";\nimport { misc as miscHelper } from \"@x-tech/fe-puma-lib/lib/helper\";\n\nexport function handlePumaInitDataMsg(e = {}, onSuccess = () => {}) {\n  if (!miscHelper.isInXinchaoDomain(e.origin)) {\n    return false;\n  }\n  const { type, payload } = e.data;\n  if (type !== MSG_TYPE_SET_INIT_DATA) {\n    return false;\n  }\n  onSuccess(payload);\n}\n","import { handlePumaInitDataMsg } from \"./helper\";\n\nfunction isFunction(functionToCheck) {\n  return (\n    functionToCheck && {}.toString.call(functionToCheck) === \"[object Function]\"\n  );\n}\n\nexport default {\n  created() {\n    window.addEventListener(\"message\", this.$_handlePumaInitDataMsg);\n  },\n  destroyed() {\n    window.removeEventListener(\"message\", this.$_handlePumaInitDataMsg);\n  },\n  methods: {\n    $_handlePumaInitDataMsg(e) {\n      handlePumaInitDataMsg(e, (data = {}) => {\n        if (isFunction(this.$_loginSuccessByPuma)) {\n          this.$_loginSuccessByPuma(data);\n        } else {\n          console.warn(\"请设置 $_loginSuccessByPuma 回调\");\n        }\n      });\n    },\n  },\n};\n","import mixin from './pumaLoginMixin';\nimport * as helper from './helper';\n\nexport default {\n  mixin,\n  helper,\n}"],"names":["handlePumaInitDataMsg","e","onSuccess","miscHelper","isInXinchaoDomain","origin","type","payload","data","MSG_TYPE_SET_INIT_DATA","isFunction","functionToCheck","toString","call","created","window","addEventListener","$_handlePumaInitDataMsg","destroyed","removeEventListener","methods","$_loginSuccessByPuma","console","warn","mixin","helper"],"mappings":";;;AAGO,SAASA,qBAAT,CAA+BC,CAAC,GAAG,EAAnC,EAAuCC,SAAS,GAAG,MAAM,EAAzD,EAA6D;AAClE,MAAI,CAACC,IAAU,CAACC,iBAAX,CAA6BH,CAAC,CAACI,MAA/B,CAAL,EAA6C;AAC3C,WAAO,KAAP;AACD;;AACD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBN,CAAC,CAACO,IAA5B;;AACA,MAAIF,IAAI,KAAKG,sBAAb,EAAqC;AACnC,WAAO,KAAP;AACD;;AACDP,EAAAA,SAAS,CAACK,OAAD,CAAT;AACD;;;;;;;ACVD,SAASG,UAAT,CAAoBC,eAApB,EAAqC;AACnC,SACEA,eAAe,IAAI,GAAGC,QAAH,CAAYC,IAAZ,CAAiBF,eAAjB,MAAsC,mBAD3D;AAGD;;AAED,YAAe;AACbG,EAAAA,OAAO,GAAG;AACRC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKC,uBAAxC;AACD,GAHY;;AAIbC,EAAAA,SAAS,GAAG;AACVH,IAAAA,MAAM,CAACI,mBAAP,CAA2B,SAA3B,EAAsC,KAAKF,uBAA3C;AACD,GANY;;AAObG,EAAAA,OAAO,EAAE;AACPH,IAAAA,uBAAuB,CAAChB,CAAD,EAAI;AACzBD,MAAAA,qBAAqB,CAACC,CAAD,EAAI,CAACO,IAAI,GAAG,EAAR,KAAe;AACtC,YAAIE,UAAU,CAAC,KAAKW,oBAAN,CAAd,EAA2C;AACzC,eAAKA,oBAAL,CAA0Bb,IAA1B;AACD,SAFD,MAEO;AACLc,UAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb;AACD;AACF,OANoB,CAArB;AAOD;;AATM;AAPI,CAAf;;ACLA,YAAe;AACbC,EAAAA,KADa;AAEbC,EAAAA;AAFa,CAAf;;;;"}